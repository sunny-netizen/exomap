<!DOCTYPE html>
<html lang="en">
<head>
    <!--
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.css" rel="stylesheet" />

    <script src="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js"></script>

    <script charset="utf-8" src="https://d3js.org/d3.v4.min.js"></script>

    <title>Document</title>

    <style>
        body { margin: 0; padding: 0; }
          
        #title {
            position: absolute;
            background-color: #fff;
            box-shadow:0 1px 2px rgba(0, 0, 0, 0.20);
            border-radius: 3px;
            padding: 15px;
            margin-top: 15px;
            margin-left: 15px;
        }
    
        #title h2 {
            line-height: 24px;
            margin: 0;
        }
    
        #title p.credit {
           margin: 10px 0 0 0;
           padding: 0;
        }
        
        #map { position: absolute; top: 0; bottom: 0; width: 100%; };
        
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="title">
        <h2>Exoplanet Map</h2>
         <p class="credit">Data: <a href="https://exoplanetarchive.ipac.caltech.edu/">NASA Exoplanet Archive API</a>.</p>
    </div>   


<script>

    mapboxgl.accessToken = 'pk.eyJ1IjoieXVuemhhbzIxIiwiYSI6ImNreWxnbDR2ejF5MjIyd3AwNXA1cDl1eGsifQ.64sJi7Q8xOekHT7A6IljEQ';

        // Load a new map in the 'map' HTML div
        var map = new mapboxgl.Map({
            container: 'map', // container id
            style: 'mapbox://styles/mapbox/dark-v10', // Using the standard Mapbox Dark style
            center: [-0.1, 51.5], // starting position [lng, lat]
            zoom: 12 // starting zoom
        });
    

    map.on('load', function(data) { 
        // https://wilsjame.github.io/how-to-nasa/#:~:text=Head%20over%20to%20api.NASA,Astronomy%20Picture%20Of%20The%20Day
        var url = "https://exoplanetarchive.ipac.caltech.edu/TAP/sync?query=select+*+from+pscomppars&format=json"
        var apikey = "50jiaKZWShuLw5q3QlC5vucCIWnxh4waOhFs3zHE"
        var apod = "https://api.nasa.gov/planetary/apod"
        // Load JSON data from the NASA API
        d3.json(url + "?api_key=" + apikey, 
        function(ExoData) {
            // Create new GeoJSON  
            //console.log(ExoData);
            console.log(ExoData[1]); 
    
            //To map the data in Mapbox, it needs to be in GeoJSON format. Going to create new GeoJSON
            var myGeojson = {};
            myGeojson.type = 'FeatureCollection'; //Specify type is feature collection
            myGeojson.features = []; //Create features array

                //var i;
                //for (i = 0; i < ExoData.length; i++) { //Loop through all docking stations
                    
                    /* var PlanetName = parseFloat(ExoData[0].value);
                    //var PropFull = NbBikes/(NbBikes+NbEmptyDocks);
                    
                        var newFeature = { //Create each docking station feature as JSON object
                            "type": "Feature",
                            "geometry": {
                                "type": "Point",
                                "coordinates": [BikeData[i].lon, BikeData[i].lat]
                            },
                            "properties": {
                                "NbBikes": NbBikes,
                                "NbEmptyDocks": NbEmptyDocks,
                                "NbTotalDocks": NbTotalDocks,
                                "PropFull": PropFull
                            }
                        }
                        //myGeojson.features.push(newFeature); //Add the new feature to the features array 
                    }*/
                //})
            })
            })
</script>
</body>
</html>